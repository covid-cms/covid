(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{234:function(t,e,n){"use strict";n(232);var r=n(7),l=(n(235),{props:{id:{type:String,default:function(){return Object(r.c)(5)}},placeholder:{type:String,default:"Danh mục"},value:{default:void 0},mutiple:{type:Boolean,default:!1},onlyParent:{type:Boolean,default:!1},ignored:{type:Array,default:function(){return[]}}},computed:{categories:function(){var t=this.$store.state.blog.category.list;return this.onlyParent?t.filter((function(t){return 0==t.parent_id})):t}},mounted:function(){$("#".concat(this.id)).select2({placeholder:this.placeholder,allowClear:!0}).on("change",this.change)},methods:{isSelected:function(t){return this.mutiple?this.value.map((function(t){return parseInt(t)})).indexOf(t.id)>-1:this.value==t.id},change:function(t){this.$emit("input",t.target.value)},shouldShow:function(t){return-1==this.ignored.findIndex((function(e){return e==t.id}))}}}),c=n(5),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{staticClass:"form-control",attrs:{id:t.id,mutiple:t.mutiple},on:{change:t.change}},[n("option"),t._v(" "),t._l(t.categories,(function(e){return t.shouldShow(e)?n("option",{key:e.id,domProps:{value:e.id,selected:t.isSelected(e)}},[t._v(t._s(e.title))]):t._e()}))],2)}),[],!1,null,null,null);e.a=component.exports},236:function(t,e,n){"use strict";n(226),n(227);var r=n(7),l={props:{id:{type:String,default:function(){return Object(r.c)(5)}},loading:{type:Boolean,default:!0},numberOfLoadingRow:{type:Number,default:5}},data:function(){return{tableEl:void 0,numberOfRow:0}},computed:{bodyEl:function(){return $("tbody",this.tableEl)},headEl:function(){return $("thead",this.tableEl)},numberOfCol:function(){return this.headEl.find("th").length},htmlLoading:function(){for(var tbody="",i=1;i<=this.numberOfLoadingRow;i++){tbody+='<tr class="loading-row">';for(var t=1;t<=this.numberOfCol;t++)tbody+='<td class=""><div class="bg-placeholder p-2 cursor-pointer"></div></td>';tbody+="</tr>"}return tbody},htmlEmpty:function(){return'<tr class="empty"><td class="text-center" colspan="'.concat(this.numberOfCol,'">Không có dữ liệu</td></tr>')},isEmpty:function(){return 0==this.numberOfRow}},mounted:function(){this.tableEl=$("#".concat(this.id)),this.calcNumberOfRow(),1==this.loading&&this.createPlaceholderLoading()},updated:function(){this.calcNumberOfRow()},methods:{calcNumberOfRow:function(){this.numberOfRow=this.bodyEl.find("tr").not(".empty, .loading-row").length},createPlaceholderLoading:function(){this.bodyEl.find("tr").hide(),this.bodyEl.append(this.htmlLoading)},destroyPlaceholderLoading:function(){this.tableEl.find("tr.loading-row").remove(),this.tableEl.find("tr").show(),this.handleEmpty()},handleEmpty:function(){this.isEmpty?this.bodyEl.html(this.htmlEmpty):this.bodyEl.find("tr.empty").remove()}},watch:{loading:function(){0==this.loading?this.destroyPlaceholderLoading():this.createPlaceholderLoading()},isEmpty:function(){this.handleEmpty()}}},c=n(5),component=Object(c.a)(l,(function(){var t=this.$createElement;return(this._self._c||t)("table",{staticClass:"table text-nowrap",class:this.loading?"":"table-striped table-hover",attrs:{id:this.id}},[this._t("default")],2)}),[],!1,null,null,null);e.a=component.exports},237:function(t,e,n){"use strict";var r=n(8),l=n(9),c=n(3),o=n(7);e.a={getList:function(t){return r.a.get(Object(c.a)("api/blog/articles"),{params:t,headers:l.a.getAuthHeaders()})},create:function(data){return r.a.post(Object(c.a)("api/blog/articles"),Object(o.b)(data),{headers:l.a.getAuthHeaders()})},getDetail:function(t){return r.a.get(Object(c.a)("api/blog/articles/".concat(t)),{headers:l.a.getAuthHeaders()})},update:function(t,data){return r.a.put(Object(c.a)("api/blog/articles/".concat(t)),Object(o.b)(data),{headers:l.a.getAuthHeaders()})},delete:function(t){return r.a.delete(Object(c.a)("api/blog/articles/".concat(t)),{headers:l.a.getAuthHeaders()})}}},389:function(t,e,n){var map={"./af":246,"./af.js":246,"./ar":247,"./ar-dz":248,"./ar-dz.js":248,"./ar-kw":249,"./ar-kw.js":249,"./ar-ly":250,"./ar-ly.js":250,"./ar-ma":251,"./ar-ma.js":251,"./ar-sa":252,"./ar-sa.js":252,"./ar-tn":253,"./ar-tn.js":253,"./ar.js":247,"./az":254,"./az.js":254,"./be":255,"./be.js":255,"./bg":256,"./bg.js":256,"./bm":257,"./bm.js":257,"./bn":258,"./bn.js":258,"./bo":259,"./bo.js":259,"./br":260,"./br.js":260,"./bs":261,"./bs.js":261,"./ca":262,"./ca.js":262,"./cs":263,"./cs.js":263,"./cv":264,"./cv.js":264,"./cy":265,"./cy.js":265,"./da":266,"./da.js":266,"./de":267,"./de-at":268,"./de-at.js":268,"./de-ch":269,"./de-ch.js":269,"./de.js":267,"./dv":270,"./dv.js":270,"./el":271,"./el.js":271,"./en-SG":272,"./en-SG.js":272,"./en-au":273,"./en-au.js":273,"./en-ca":274,"./en-ca.js":274,"./en-gb":275,"./en-gb.js":275,"./en-ie":276,"./en-ie.js":276,"./en-il":277,"./en-il.js":277,"./en-nz":278,"./en-nz.js":278,"./eo":279,"./eo.js":279,"./es":280,"./es-do":281,"./es-do.js":281,"./es-us":282,"./es-us.js":282,"./es.js":280,"./et":283,"./et.js":283,"./eu":284,"./eu.js":284,"./fa":285,"./fa.js":285,"./fi":286,"./fi.js":286,"./fo":287,"./fo.js":287,"./fr":288,"./fr-ca":289,"./fr-ca.js":289,"./fr-ch":290,"./fr-ch.js":290,"./fr.js":288,"./fy":291,"./fy.js":291,"./ga":292,"./ga.js":292,"./gd":293,"./gd.js":293,"./gl":294,"./gl.js":294,"./gom-latn":295,"./gom-latn.js":295,"./gu":296,"./gu.js":296,"./he":297,"./he.js":297,"./hi":298,"./hi.js":298,"./hr":299,"./hr.js":299,"./hu":300,"./hu.js":300,"./hy-am":301,"./hy-am.js":301,"./id":302,"./id.js":302,"./is":303,"./is.js":303,"./it":304,"./it-ch":305,"./it-ch.js":305,"./it.js":304,"./ja":306,"./ja.js":306,"./jv":307,"./jv.js":307,"./ka":308,"./ka.js":308,"./kk":309,"./kk.js":309,"./km":310,"./km.js":310,"./kn":311,"./kn.js":311,"./ko":312,"./ko.js":312,"./ku":313,"./ku.js":313,"./ky":314,"./ky.js":314,"./lb":315,"./lb.js":315,"./lo":316,"./lo.js":316,"./lt":317,"./lt.js":317,"./lv":318,"./lv.js":318,"./me":319,"./me.js":319,"./mi":320,"./mi.js":320,"./mk":321,"./mk.js":321,"./ml":322,"./ml.js":322,"./mn":323,"./mn.js":323,"./mr":324,"./mr.js":324,"./ms":325,"./ms-my":326,"./ms-my.js":326,"./ms.js":325,"./mt":327,"./mt.js":327,"./my":328,"./my.js":328,"./nb":329,"./nb.js":329,"./ne":330,"./ne.js":330,"./nl":331,"./nl-be":332,"./nl-be.js":332,"./nl.js":331,"./nn":333,"./nn.js":333,"./pa-in":334,"./pa-in.js":334,"./pl":335,"./pl.js":335,"./pt":336,"./pt-br":337,"./pt-br.js":337,"./pt.js":336,"./ro":338,"./ro.js":338,"./ru":339,"./ru.js":339,"./sd":340,"./sd.js":340,"./se":341,"./se.js":341,"./si":342,"./si.js":342,"./sk":343,"./sk.js":343,"./sl":344,"./sl.js":344,"./sq":345,"./sq.js":345,"./sr":346,"./sr-cyrl":347,"./sr-cyrl.js":347,"./sr.js":346,"./ss":348,"./ss.js":348,"./sv":349,"./sv.js":349,"./sw":350,"./sw.js":350,"./ta":351,"./ta.js":351,"./te":352,"./te.js":352,"./tet":353,"./tet.js":353,"./tg":354,"./tg.js":354,"./th":355,"./th.js":355,"./tl-ph":356,"./tl-ph.js":356,"./tlh":357,"./tlh.js":357,"./tr":358,"./tr.js":358,"./tzl":359,"./tzl.js":359,"./tzm":360,"./tzm-latn":361,"./tzm-latn.js":361,"./tzm.js":360,"./ug-cn":362,"./ug-cn.js":362,"./uk":363,"./uk.js":363,"./ur":364,"./ur.js":364,"./uz":365,"./uz-latn":366,"./uz-latn.js":366,"./uz.js":365,"./vi":367,"./vi.js":367,"./x-pseudo":368,"./x-pseudo.js":368,"./yo":369,"./yo.js":369,"./zh-cn":370,"./zh-cn.js":370,"./zh-hk":371,"./zh-hk.js":371,"./zh-tw":372,"./zh-tw.js":372};function r(t){var e=l(t);return n(e)}function l(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=l,t.exports=r,r.id=389},435:function(t,e,n){"use strict";n.r(e);n(29),n(14),n(15),n(6),n(25),n(139),n(28);var r=n(2),l=n(11),c=(n(227),n(26)),o=(n(226),[{id:"published",title:"Đã đăng"},{id:"draft",title:"Nháp"}]);var d=n(222),h=n.n(d);var f=n(234),v=n(236),m={props:{total:{type:Number,default:1},current:{type:Number,default:1},perpage:{type:Number,default:15},range:{type:Number,default:9}},computed:{show:function(){return this.total>0},totalPage:function(){return Math.ceil(this.total/this.perpage)},ranges:function(){var t=0,e=0;if(this.perpage<this.total){(this.current-1)*this.perpage;var n=Math.ceil(this.range/2);this.totalPage<this.range?(t=1,e=this.totalPage):(t=this.current-n+1,e=this.current+n-1,t<1?(t=1,e=this.range):e>this.totalPage&&(e=this.totalPage,t=this.totalPage-this.range+1))}return{min:t,max:e}},min:function(){return this.ranges.min},max:function(){return this.ranges.max},minToMax:function(){for(var t=[],i=this.min;i<=this.max;i++)t.push(i);return t}},methods:{nextEvent:function(){this.$emit("change",this.current+1)},prevEvent:function(){this.$emit("change",this.current-1)},firstEvent:function(){this.$emit("change",1)},lastEvent:function(){this.$emit("change",this.totalPage)},changeEvent:function(t){this.$emit("change",t)}}},j=n(5),y=Object(j.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.totalPage>1?n("nav",[n("ul",{staticClass:"pagination justify-content-center"},[t.current>1?[n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:"#first"},on:{click:function(e){return e.preventDefault(),t.firstEvent(e)}}},[t._v("Trang đầu")])]),t._v(" "),n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:"#prev"},on:{click:function(e){return e.preventDefault(),t.prevEvent(e)}}},[t._v("Trang trước")])])]:t._e(),t._v(" "),t._l(t.minToMax,(function(i){return n("li",{key:i,staticClass:"page-item",class:{active:t.current===i}},[n("a",{staticClass:"page-link",attrs:{href:"#change"},on:{click:function(e){return e.preventDefault(),t.changeEvent(i)}}},[t._v(t._s(i))])])})),t._v(" "),t.current<t.totalPage?[n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:"#next"},on:{click:function(e){return e.preventDefault(),t.nextEvent(e)}}},[t._v("Trang tiếp")])]),t._v(" "),n("li",{staticClass:"page-item"},[n("a",{staticClass:"page-link",attrs:{href:"#last"},on:{click:function(e){return e.preventDefault(),t.lastEvent(e)}}},[t._v("Trang cuối")])])]:t._e()],2)]):t._e()}),[],!1,null,null,null).exports,_=n(237),k=n(8),w=n(9),C=n(3),x=function(t){return k.a.get(Object(C.a)("api/blog/statistic/article"),{params:t,headers:w.a.getAuthHeaders()})};function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var E={middleware:"authenticate",head:{title:"Danh sách bài viết"},components:{categoriesSelect:f.a,smartTable:v.a,pagination:y},filters:{articleStatusTitle:function(t){return o.find((function(e){return e.id==t})).title},dateFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";return h()(t).format(e)}},asyncData:function(t){t.params;var e=t.query;return{articles:[],total:0,filters:{page:e.page&&e.page>=1?Number(e.page):1,status:e.status||"all",category_id:e.category_id||void 0,keyword:e.keyword||void 0},statistic:{totalCount:0,publishCount:0,draftCount:0},isLoading:!1}},created:function(){this.setActivedMenu(["blog","article"]),this["blog/category/fetch"](),this.fetchData()},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({fetchData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,_.a.getList(t.filters);case 3:return n=e.sent,r=n.data,t.articles=r.data,t.total=r.total,t.perpage=r.per_page,t.isLoading=!1,e.next=11,x();case 11:l=e.sent,c=l.data,t.statistic.totalCount=c.data.total_count,t.statistic.publishCount=c.data.publish_count,t.statistic.draftCount=c.data.draft_count;case 16:case"end":return e.stop()}}),e)})))()},changeTab:function(t){if("published"==t)this.filters.status="published";else if("draft"==t)this.filters.status="draft";else{if("all"!=t)throw"Không hiểu tab "+t;this.filters.status="all"}},isActiveTab:function(t){return this.filters.status==t},updateBrowserUrl:function(){this.$router.push({path:this.$route.path,query:this.filters})},search:function(){this.fetchData(),this.updateBrowserUrl()},deleteArticle:function(article){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$alert.fire({title:"Bạn có chắc chắn muốn xóa?",text:"Sau khi xóa sẽ không thể khôi phục!",icon:"warning",showCancelButton:!0,confirmButtonText:"Xóa",cancelButtonText:"Hủy"});case 2:if(n=e.sent,!n.value){e.next=9;break}return e.next=7,_.a.delete(article.id);case 7:t.$toast.success("Đã xóa"),t.fetchData();case 9:case"end":return e.stop()}}),e)})))()},changePage:function(t){this.filters.page=t}},Object(c.b)(["setActivedMenu","blog/category/fetch"])),watch:{"filters.page":function(){this.search()},"filters.category_id":function(){this.changePage(1),this.search()},"filters.keyword":function(){this.changePage(1),this.search()},"filters.status":function(){this.changePage(1),this.search()}}},P=Object(j.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content-header"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"d-flex align-items-center"},[t._m(0),t._v(" "),n("div",{staticClass:"mr-auto"},[n("button",{staticClass:"btn btn-outline-danger btn-xs",attrs:{to:"/blog/articles/create"},on:{click:function(e){return e.preventDefault(),t.$router.push("/blog/articles/create")}}},[t._v("Viết bài mới")])])])])]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card card-danger card-outline card-outline-tabs"},[n("div",{staticClass:"card-header p-0 border-bottom-0"},[n("ul",{staticClass:"nav nav-tabs",attrs:{id:"custom-tabs-four-tab",role:"tablist"}},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link text-dark",class:{active:t.isActiveTab("all")},attrs:{href:"#all",role:"tab"},on:{click:function(e){return e.preventDefault(),t.changeTab("all")}}},[t._v("Tất cả bài viết ("+t._s(t.statistic.totalCount)+")")])]),t._v(" "),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link text-dark",class:{active:t.isActiveTab("published")},attrs:{href:"#published",role:"tab"},on:{click:function(e){return e.preventDefault(),t.changeTab("published")}}},[t._v("Bài đã đăng ("+t._s(t.statistic.publishCount)+")")])]),t._v(" "),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link text-dark",class:{active:t.isActiveTab("draft")},attrs:{href:"#draft",role:"tab"},on:{click:function(e){return e.preventDefault(),t.changeTab("draft")}}},[t._v("Bài nháp ("+t._s(t.statistic.draftCount)+")")])])])]),t._v(" "),n("form",{staticClass:"card-body border-bottom",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[n("div",{staticClass:"d-flex"},[n("div",{staticClass:"mr-3",staticStyle:{"min-width":"250px"}},[n("categories-select",{model:{value:t.filters.category_id,callback:function(e){t.$set(t.filters,"category_id",e)},expression:"filters.category_id"}})],1),t._v(" "),n("div",{staticClass:"w-100 mr-3"},[n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.filters.keyword,expression:"filters.keyword",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:500,expression:"500"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhập từ khóa tìm kiếm"},domProps:{value:t.filters.keyword},on:{change:function(e){return t.$set(t.filters,"keyword",e.target.value)}}})]),t._v(" "),t._m(1)])]),t._v(" "),n("div",{staticClass:"card-body table-responsive p-0"},[n("smart-table",{attrs:{loading:t.isLoading,"number-of-loading-row":15}},[n("thead",[n("tr",[n("th",[t._v("Tên bài viết")]),t._v(" "),n("th",{staticClass:"date-format"},[t._v("Ngày đăng")]),t._v(" "),n("th",[t._v("Trạng thái")]),t._v(" "),n("th",[t._v("Danh mục")]),t._v(" "),n("th")])]),t._v(" "),n("tbody",t._l(t.articles,(function(article){return n("tr",[n("td",[n("nuxt-link",{staticClass:"text-primary",attrs:{to:"/blog/articles/"+article.id+"/edit"}},[t._v(t._s(article.title))])],1),t._v(" "),n("td",{staticClass:"date-format"},[t._v(t._s(t._f("dateFormat")(article.publish_at)))]),t._v(" "),n("td",[n("span",{staticClass:"tag tag-success"},[t._v(t._s(t._f("articleStatusTitle")(article.status)))])]),t._v(" "),n("td",[t._v("\n                  "+t._s(article.categories.map((function(t){return t.title})).join(", "))+"\n                ")]),t._v(" "),n("td",{staticClass:"action-col"},[n("button",{staticClass:"btn border-0 btn-outline-secondary dropdown-toggle btn-xs clear-after",attrs:{type:"button","data-toggle":"dropdown","aria-expanded":"false"}},[n("i",{staticClass:"fas fa-ellipsis-v"})]),t._v(" "),n("ul",{staticClass:"dropdown-menu border-0"},[n("li",[n("nuxt-link",{staticClass:"dropdown-item",attrs:{to:"/blog/articles/"+article.id+"/edit"}},[t._v("Chỉnh sửa")])],1),t._v(" "),n("li",[n("a",{staticClass:"dropdown-item",attrs:{href:article.public_url}},[t._v("Xem ngoài trang chủ")])]),t._v(" "),n("li",{staticClass:"dropdown-divider"}),t._v(" "),n("li",[n("a",{staticClass:"dropdown-item text-danger",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteArticle(article)}}},[t._v("Xóa")])])])])])})),0)])],1),t._v(" "),n("div",{staticClass:"card-footer clearfix"},[n("pagination",{attrs:{total:t.total,current:t.filters.page},on:{change:t.changePage}})],1)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mr-4"},[e("h1",{staticClass:"m-0 text-dark"},[this._v("Danh sách bài viết")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("button",{staticClass:"btn btn-danger",staticStyle:{"min-width":"100px"},attrs:{type:"submit",placeholder:"Tìm kiếm theo tên bài viết"}},[this._v("Tìm kiếm")])])}],!1,null,null,null);e.default=P.exports}}]);